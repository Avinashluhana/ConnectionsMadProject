(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{201:function(e,t,a){"use strict";a.d(t,"a",(function(){return K}));var n=a(73),r=a(0),o=a.n(r),i=a(2),c=a(296),l=a(297),s=a(11),u=a.n(s),m=a(5),d=a(81),h=a(37),p=a(70);a(272),a(273);0===p.a.apps.length?p.a.initializeApp({apiKey:"AIzaSyCegpSFzKFkhVodOcspTzNdGGVDDoHHMW8",authDomain:"connections-9c503.firebaseapp.com",projectId:"connections-9c503",storageBucket:"connections-9c503.appspot.com",messagingSenderId:"172205849553",appId:"1:172205849553:web:6f754d051559c168847ef0",measurementId:"G-1QMF61DXYR"}):p.a.app();var g=p.a.firestore(),f=p.a.auth(),E=function(e){var t=e.navigation,a=Object(r.useState)(""),i=u()(a,2),c=i[0],l=i[1],s=Object(r.useState)(""),p=u()(s,2),g=p[0],E=p[1];Object(r.useEffect)((function(){return f.onAuthStateChanged((function(e){e&&t.replace("Home")}))}),[]);var b=function(){f.signInWithEmailAndPassword(c,g).catch((function(e){return alert(e)}))};return o.a.createElement(d.a,{behavior:"padding",enabled:!0,style:y.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(h.c,{source:{uri:"https://image.flaticon.com/icons/png/512/134/134932.png"},style:{width:200,height:200}}),o.a.createElement(h.d,{placeholder:"Email",autoFocus:!0,type:"email",value:c,onChangeText:function(e){return l(e)}}),o.a.createElement(h.d,{placeholder:"Password",secureTextEntry:!0,type:"password",value:g,onChangeText:function(e){return E(e)},onSubmitEditing:b}),o.a.createElement(h.b,{containerStyle:y.button,title:"Login",onPress:b}),o.a.createElement(h.b,{containerStyle:y.button,title:"Register",type:"outline",backgroundColor:"#008891",onPress:function(){return t.navigate("Register")}}),o.a.createElement(m.a,{style:{height:100}}))},y=i.a.create({container:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},logo:{width:100,height:100,marginBottom:20,borderRadius:5},loginContainer:{width:300},inputContainer:{marginTop:20,width:100},button:{marginTop:10,width:200}}),b=function(e){e.navigation;var t=Object(r.useState)(""),a=u()(t,2),n=a[0],i=a[1],c=Object(r.useState)(""),l=u()(c,2),s=l[0],p=l[1],g=Object(r.useState)(""),E=u()(g,2),y=E[0],b=E[1],C=Object(r.useState)(""),w=u()(C,2),S=w[0],x=w[1],O=function(){f.createUserWithEmailAndPassword(s,y).then((function(e){e.user.updateProfile({displayName:n,photoURL:S||"https://randomuser.me/api/portraits/men/10.jpg"})})).catch((function(e){return alert(e.message)}))};return o.a.createElement(d.a,{behavior:"padding",style:v.container},o.a.createElement(h.f,{h3:!0,style:{marginBottom:50}},"Create an account"),o.a.createElement(m.a,{style:v.inputContainer},o.a.createElement(h.d,{placeholder:"Name",type:"text",value:n,onChangeText:function(e){return i(e)}}),o.a.createElement(h.d,{placeholder:"Email",type:"email",value:s,onChangeText:function(e){return p(e)}}),o.a.createElement(h.d,{placeholder:"Password",type:"password",secureTextEntry:!0,value:y,onChangeText:function(e){return b(e)}}),o.a.createElement(h.d,{placeholder:"Paste profile photo url (optional)",type:"text",value:S,onChangeText:function(e){return x(e)},onSubmitEditing:O}),o.a.createElement(h.b,{raised:!0,onPress:O,title:"Register"})))},v=i.a.create({container:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},registerContainer:{width:300},button:{width:200,marginTop:20},inputContainer:{width:300}}),C=a(80),w=a(50),S=a(19),x=a(63),O=function(e){var t,a,n,i=e.id,c=e.chatName,l=e.enterChat,s=Object(r.useState)([]),d=u()(s,2),p=d[0],f=d[1];return Object(r.useEffect)((function(){return g.collection("chats").doc(i).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))})),o.a.createElement(m.a,{style:k.chat},o.a.createElement(h.e,{key:i,onPress:function(){return l(i,c)},key:i,bottomDivider:!0},o.a.createElement(h.a,{rounded:!0,source:{uri:(null==p||null==(t=p[0])?void 0:t.photoURL)||"https://p7.hiclipart.com/preview/7/618/505/avatar-icon-fashion-men-vector-avatar.jpg"},size:50}),o.a.createElement(h.e.Content,null,o.a.createElement(h.e.Title,{style:{fontWeight:"bold"}},c),o.a.createElement(h.e.Subtitle,{numberOfLines:1,ellipsizeMode:"tail"},null==p||null==(a=p[0])?void 0:a.displayName,": ",null==p||null==(n=p[0])?void 0:n.message))))},k=i.a.create({}),j=a(186),T=a(181),R=function(e){var t=e.navigation,a=Object(r.useState)([]),i=u()(a,2),c=i[0],l=i[1],s=function(){f.signOut().then((function(){t.replace("login")}))};Object(r.useEffect)((function(){return g.collection("chats").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Connections",headerStyle:{backgroundColor:"#008891"},headerTitleStyle:{color:"white"},headerTitleColor:"white",headerLeft:function(){var e;return o.a.createElement(m.a,{style:{marginLeft:20}},o.a.createElement(S.a,{onPress:s},o.a.createElement(x.a,{rounded:!0,source:{uri:null==f||null==(e=f.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return o.a.createElement(m.a,{style:{flexDirection:"row",justifyContent:"space-between",width:80,marginRight:20}},o.a.createElement(S.a,{activeOpacity:.5},o.a.createElement(j.a,{name:"camerao",color:"white",size:24})),o.a.createElement(S.a,{activeOpacity:.5,onPress:function(){return t.navigate("addChat")}},o.a.createElement(T.a,{name:"pencil",color:"white",size:20})))}})}),[t]);var d=function(e,a){t.navigate("ChatScreen",{id:e,chatName:a})};return o.a.createElement(C.a,{style:z.container},o.a.createElement(n.a,{style:"light"}),o.a.createElement(w.a,{style:z.chats},c.map((function(e){var t=e.id,a=e.data.chatName;return o.a.createElement(O,{key:t,id:t,chatName:a,enterChat:d})}))))},z=i.a.create({container:{height:"100%"}}),L=a(15),P=a.n(L),I=a(17),N=a(79),U=function(e){var t=e.navigation,a=Object(r.useState)(""),n=u()(a,2),i=n[0],c=n[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Add a new Chat",headerStyle:{backgroundColor:"#008891"},headerTitleStyle:{color:"white"},headerTintColor:"white",headerBackTitle:"Chats"})}),[t]);return o.a.createElement(m.a,{style:B.container},o.a.createElement(N.a,{style:B.inputchatname,placeholder:"Enter a chat name",value:i,onChangeText:function(e){return c(e)}}),o.a.createElement(S.a,{disabled:!i,onPress:function(){return P.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.awrap(g.collection("chats").add({chatName:i}).then((function(){t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)}},o.a.createElement(m.a,{style:B.createchat},o.a.createElement(I.a,{style:{fontWeight:"700",fontSize:20,color:"white"}},"Create Chat"))))},B=i.a.create({container:{flex:1,alignItems:"center",paddingHorizontal:20},inputchatname:{width:"80%",maxWidth:400,height:50,backgroundColor:"white",paddingLeft:15,borderRadius:10,marginTop:30,marginBottom:30},createchat:{backgroundColor:"#008891",height:50,width:150,borderRadius:20,justifyContent:"center",alignItems:"center"}}),W=a(86),A=a(176),D=a(167),F=a(7),H=a(62),V=function(e){var t=e.navigation,a=e.route,n=Object(r.useState)(""),i=u()(n,2),c=i[0],l=i[1],s=Object(r.useState)([]),h=u()(s,2),E=h[0],y=h[1];Object(r.useLayoutEffect)((function(){t.setOptions({title:"Chat",headerStyle:{backgroundColor:"#008891"},headerTintColor:"white",headerBackTitleVisible:!1,headerTitleAlign:"left",headerTitle:function(){var e;return o.a.createElement(m.a,{style:{flexDirection:"row",alignItems:"center"}},o.a.createElement(x.a,{rounded:!0,size:40,source:{uri:null==E||null==(e=E[0])?void 0:e.data.photoURL}}),o.a.createElement(I.a,{style:{fontWeight:"700",fontSize:20,color:"white",marginLeft:10}},a.params.chatName))},headerLeft:function(){return o.a.createElement(S.a,{activeOpacity:.5,style:{marginLeft:15},onPress:t.goBack},o.a.createElement(j.a,{name:"leftcircle",color:"white",size:25}))},headerRight:function(){return o.a.createElement(m.a,{style:{flexDirection:"row",width:90,justifyContent:"space-between",alignItems:"center",paddingRight:15}},o.a.createElement(S.a,{activeOpacity:.5},o.a.createElement(A.a,{name:"video-camera",size:20,color:"white",style:G.icon})),o.a.createElement(S.a,{activeOpacity:.5},o.a.createElement(D.a,{name:"call",size:20,color:"white",style:G.phoneicon})))}})}),[t,E]);var b=function(){W.a.dismiss(),g.collection("chats").doc(a.params.id).collection("messages").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),message:c,displayName:f.currentUser.displayName,email:f.currentUser.email,photoURL:f.currentUser.photoURL}),l("")};return Object(r.useLayoutEffect)((function(){return g.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp").onSnapshot((function(e){return y(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),o.a.createElement(C.a,{style:{flex:1,backgroundColor:"#30475e"}},o.a.createElement(d.a,{behavior:"ios"===F.a.OS?"padding":"height",style:G.container,keyboardVerticalOffset:90},o.a.createElement(H.a,{onPress:W.a.dismiss},o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{contentContainerStyle:{padding:10}},E.map((function(e){var t=e.id,a=e.data;return a.email===f.currentUser.email?o.a.createElement(m.a,{key:t,style:G.sender},o.a.createElement(x.a,{position:"absolute",bottom:-15,right:-5,rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},size:25,source:{uri:a.photoURL}}),o.a.createElement(I.a,{style:G.sendermsg},a.message)):o.a.createElement(m.a,{key:t,style:G.receiver},o.a.createElement(x.a,{position:"absolute",bottom:-15,right:-5,rounded:!0,containerStyle:{position:"absolute",bottom:-15,right:-5},size:25,source:{uri:"https://sw.muet.edu.pk/faculty///photos/mohsin.jpg"}}),o.a.createElement(I.a,{style:G.recievermsg},a.message),o.a.createElement(I.a,{style:{fontSize:11,color:"#008891",textAlign:"right",position:"relative",bottom:-9}},a.displayName))}))),o.a.createElement(m.a,{style:G.footer},o.a.createElement(N.a,{placeholder:"Enter message",value:c,style:G.inputmsg,onSubmitEditing:b,onChangeText:function(e){return l(e)}}),o.a.createElement(S.a,{onPress:b,activeOpacity:.5},o.a.createElement(D.a,{name:"send",size:26,color:"#008891"})))))))},G=i.a.create({container:{flex:1,width:"100%",backgroundColor:"#30475e"},footer:{flexDirection:"row",width:"100%",alignItems:"center",padding:15},inputmsg:{width:"90%",padding:10,borderWidth:1,bottom:0,height:40,flex:1,marginRight:15,borderColor:"transparent",color:"black",borderRadius:30,backgroundColor:"white"},sender:{padding:15,alignSelf:"flex-end",backgroundColor:"#008891",borderRadius:20,marginRight:15,maxWidth:"80%",position:"relative",marginBottom:20},receiver:{padding:15,alignSelf:"flex-start",backgroundColor:"white",borderRadius:20,marginRight:15,maxWidth:"80%",position:"relative",marginBottom:20},sendermsg:{color:"white",fontSize:15},recievermsg:{color:"black",fontSize:15},icon:{marginLeft:40},phoneicon:{marginLeft:10}}),M=Object(l.a)(),J={headerStyle:{backgroundColor:"#008891"},headerTitleStyle:{color:"white"},headerTintCOlor:"white"};function K(){return console.log("App is excuted"),o.a.createElement(c.a,null,o.a.createElement(M.Navigator,{screenOptions:J},o.a.createElement(M.Screen,{name:"login",component:E}),o.a.createElement(M.Screen,{name:"Register",component:b}),o.a.createElement(M.Screen,{name:"Home",component:R}),o.a.createElement(M.Screen,{name:"addChat",component:U}),o.a.createElement(M.Screen,{name:"ChatScreen",component:V})),o.a.createElement(n.a,{style:"auto"}))}i.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center"}})},208:function(e,t,a){e.exports=a(280)}},[[208,1,2]]]);
//# sourceMappingURL=app.a79b588d.chunk.js.map